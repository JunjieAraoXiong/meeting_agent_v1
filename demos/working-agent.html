<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ä¼šè®®åŠ©æ‰‹ - Meeting Agent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif; }
        .segment { padding: 12px; margin: 8px 0; border: 1px solid #e5e7eb; border-radius: 8px; }
        .revealed { background: white; opacity: 1; }
        .hidden { background: #f9f9f9; opacity: 0.5; }
        .highlight { background: #fef3c7; padding: 2px 4px; border-radius: 4px; cursor: pointer; font-weight: 500; }
    </style>
</head>
<body class="bg-gray-50 p-4">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold mb-4">ğŸ¯ ä¼šè®®åŠ©æ‰‹ - Meeting Agent</h1>
        
        <div class="bg-white rounded-lg p-4 mb-4 shadow">
            <div class="flex gap-2 mb-4">
                <button onclick="playPause()" id="playBtn" class="px-4 py-2 bg-green-500 text-white rounded">â–¶ï¸ æ’­æ”¾</button>
                <button onclick="reset()" class="px-4 py-2 bg-gray-500 text-white rounded">ğŸ”„ é‡ç½®</button>
                <button onclick="showPasteModal()" class="px-4 py-2 bg-blue-500 text-white rounded">ğŸ“‹ ç²˜è´´</button>
            </div>
            <div class="flex items-center gap-2">
                <span id="currentTime">0:00</span>
                <input type="range" id="timeline" min="0" max="300" value="0" class="flex-1" oninput="seek(this.value)">
                <span id="maxTime">5:00</span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <div class="lg:col-span-2 bg-white rounded-lg p-4 shadow">
                <h2 class="text-lg font-semibold mb-3">ğŸ“œ ä¼šè®®è½¬å½•</h2>
                <div id="transcript" class="space-y-2 max-h-96 overflow-y-auto">
                    <!-- Content will be added here -->
                </div>
            </div>
            
            <div class="bg-white rounded-lg p-4 shadow">
                <h2 class="text-lg font-semibold mb-3">ğŸ“– å…³é”®æœ¯è¯­</h2>
                <div id="selectedTerm" class="text-blue-600 font-semibold mb-2">ç‚¹å‡»æœ¯è¯­æŸ¥çœ‹å®šä¹‰</div>
                <div id="termDef" class="text-gray-600 text-sm mb-4">æœ¯è¯­ä¼šéšä¼šè®®è¿›åº¦æ˜¾ç¤º</div>
                <div id="terms" class="flex flex-wrap gap-1">
                    <!-- Terms will be added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl m-4">
            <h3 class="text-lg font-semibold mb-4">ğŸ“‹ ç²˜è´´è½¬å½•æ–‡æœ¬</h3>
            <textarea id="pasteText" class="w-full h-64 border rounded p-3" placeholder="åœ¨æ­¤ç²˜è´´è½¬å½•æ–‡æœ¬...

æ ¼å¼:
æ±¤æ¬£é’° 00:00
å†…å®¹...

è¯´è¯äºº 1 01:30
æ›´å¤šå†…å®¹..."></textarea>
            <div class="flex justify-end gap-2 mt-4">
                <button onclick="closeModal()" class="px-4 py-2 bg-gray-300 rounded">å–æ¶ˆ</button>
                <button onclick="loadPastedText()" class="px-4 py-2 bg-blue-500 text-white rounded">åŠ è½½</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const sampleText = `æ±¤æ¬£é’° 00:00
çŒ«æˆ´åœ¨èº«ä¸Šï¼Œç„¶ååˆæœ‰å®šä½ï¼Œåˆæœ‰ç³–åŒ…ä¸ç¿»è¯‘ã€‚å—¯ï¼Œå»å¹´å¥½åƒå°±æœ‰è¿™ä¸ªï¼Œå¥½åƒå°±æœ‰ä¸€ä¸ªï¼Œå»å¹´å¥½åƒæœ‰ä¸€ä¸ªç±»ä¼¼çš„ï¼Œå°±æ˜¯ä¹Ÿæˆ´åœ¨ä»€ä¹ˆèº«ä¸Šå•Šï¼Ÿç‹—å•Šï¼Ÿå¯¹å•Šï¼Œé‚£ä¸ªç½‘ç«™çš„å“ªé‡Œå•Šï¼Ÿé‚£ä¸ªæœ‰æ²¡æœ‰æ€»çš„é‚£ä¸ª listï¼Ÿ

æ±¤æ¬£é’° 00:56
ç„¶åï¼Œå—¯ï¼Œè¦ä¸ç„¶æˆ‘ä»¬å…ˆè¯´ï¼Œå—¯ï¼Œå°±æ˜å¤©ï¼Œä¸æ˜¯è¿˜æ˜¯ä¸‹åˆæœ‰é‚£ä¸ªå‘¨ä¼šå˜›ï¼Ÿå—¯ï¼Œå¯¹ï¼Œå°±å¤§å®¶æœ€è¿‘æœ‰æ²¡æœ‰ä»€ä¹ˆå›°éš¾ï¼Ÿç„¶åä»¥åŠæœ‰æ²¡æœ‰è¯†åˆ«åˆ°ä»€ä¹ˆæœºä¼šã€æƒ³æ³•çš„ï¼Ÿ

æ±¤æ¬£é’° 01:36
å¯¹ï¼Œæˆ‘çœ‹è¿™ä¸ªé»‘é©¬é¡¹ç›®ä»–ä»¬éƒ½æœ‰åœ¨å…¨æ· OA ä¸Šéƒ¨ç½²ä¸€äº› 1.5B çš„ç«¯è§‚æµ‹æ¨¡å‹ã€‚å—¯ï¼Œå®Œå…¨æ˜¯æ¯”æˆ‘ä»¬è¿™ä¸ªå‚æ•°é‡è¦å¤§å¾—å¤šï¼Œç„¶åå¥½åƒè¿˜è¡Œï¼Œé‚£å¯ä»¥è”ç³»ä¸‹ä»–ä»¬ï¼Œæ˜¯å§ï¼Ÿ

æ±¤æ¬£é’° 02:04
ä½ è¿™ä¸ªçŸ¥é“ï¼Œç„¶åæˆ‘å†é—®ä¸€ä¸‹è¿™è¾¹çš„ Buzzï¼Œæ˜¯å§ï¼Ÿç„¶åæˆ‘ä¹Ÿç•™äº†ã€‚é‚£ä¸ªè¿˜æœ‰æ²¡æœ‰ä»€ä¹ˆå›°éš¾å•Šï¼Ÿæœ‰æ²¡æœ‰å¤§å®¶è§‰å¾—é‡åˆ°ä¸€äº›å›°éš¾çš„ï¼Ÿå¯¹ã€‚å—¯ï¼Œæœ‰ä¸ªæ¯”è¾ƒå¤§çš„å›°éš¾ï¼Œå°±è·Ÿä¸Šå¤´èŠçš„é‚£ä¸ªéšç§æ¨¡å¼ï¼Œå…¶å®æ„Ÿè§‰æ²¡æœ‰ç‰¹åˆ«å¥½çš„æ€è·¯ã€‚`;

        let segments = [];
        let currentIndex = -1;
        let isPlaying = false;
        let playInterval;
        let allTerms = [];

        function parseTime(timeStr) {
            const [min, sec] = timeStr.split(':').map(Number);
            return min * 60 + sec;
        }

        function formatTime(seconds) {
            const min = Math.floor(seconds / 60);
            const sec = seconds % 60;
            return `${min}:${sec.toString().padStart(2, '0')}`;
        }

        function parseTranscript(text) {
            const lines = text.split('\n').filter(line => line.trim());
            const result = [];
            const speakerPattern = /^(.+?)\s+(\d{1,2}:\d{2})$/;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                const match = line.match(speakerPattern);
                
                if (match) {
                    const speaker = match[1];
                    const time = match[2];
                    const timeSeconds = parseTime(time);
                    
                    let content = '';
                    let j = i + 1;
                    while (j < lines.length && !lines[j].match(speakerPattern)) {
                        if (content) content += ' ';
                        content += lines[j].trim();
                        j++;
                    }
                    
                    if (content) {
                        result.push({ speaker, time, timeSeconds, content, index: result.length });
                    }
                    i = j - 1;
                }
            }
            return result;
        }

        function extractTerms(segments) {
            const terms = new Set();
            segments.forEach(seg => {
                // Find Chinese technical terms
                const matches = seg.content.match(/([\u4e00-\u9fa5]{2,4})(é¡¹ç›®|æ¨¡å‹|æ¨¡å¼|ç³»ç»Ÿ|å¹³å°|ç®—æ³•|æ–¹æ¡ˆ|äº§å“|è®¾å¤‡|çœ¼é•œ|æ‰‹ç¯|å½•éŸ³)/g);
                if (matches) matches.forEach(term => terms.add(term));
                
                const techMatches = seg.content.match(/(\d+\.?\d*[BM]?)\s*(æ¨¡å‹|å‚æ•°|ç‰ˆæœ¬)/g);
                if (techMatches) techMatches.forEach(term => terms.add(term));
                
                const brandMatches = seg.content.match(/\b(Meta|Google|è°·æ­Œ|è‹¹æœ|å°ç±³|é›·æœ‹|Buzz|OA)\b/gi);
                if (brandMatches) brandMatches.forEach(term => terms.add(term));
            });
            return Array.from(terms);
        }

        function highlightTerms(text) {
            let result = text;
            allTerms.forEach(term => {
                const regex = new RegExp(`(${term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                result = result.replace(regex, `<span class="highlight" onclick="selectTerm('$1')">$1</span>`);
            });
            return result;
        }

        function selectTerm(term) {
            document.getElementById('selectedTerm').textContent = term;
            document.getElementById('termDef').textContent = `å®šä¹‰: ${term} - è¿™æ˜¯ä¼šè®®ä¸­æåˆ°çš„é‡è¦æœ¯è¯­`;
        }

        function renderTranscript() {
            const container = document.getElementById('transcript');
            container.innerHTML = '';
            
            segments.forEach((seg, index) => {
                const div = document.createElement('div');
                div.className = `segment ${index <= currentIndex ? 'revealed' : 'hidden'}`;
                
                const highlightedContent = highlightTerms(seg.content);
                
                div.innerHTML = `
                    <div class="text-xs text-gray-500 mb-1">
                        <span class="font-mono">${seg.time}</span>
                        <span class="ml-2 px-2 py-1 bg-gray-100 rounded text-xs">${seg.speaker}</span>
                    </div>
                    <div class="text-sm">${highlightedContent}</div>
                `;
                container.appendChild(div);
            });
        }

        function renderTerms() {
            const container = document.getElementById('terms');
            container.innerHTML = '';
            
            allTerms.forEach(term => {
                const button = document.createElement('button');
                button.className = 'text-xs px-2 py-1 bg-gray-100 rounded hover:bg-gray-200';
                button.textContent = term;
                button.onclick = () => selectTerm(term);
                container.appendChild(button);
            });
        }

        function playPause() {
            const btn = document.getElementById('playBtn');
            if (isPlaying) {
                clearInterval(playInterval);
                btn.textContent = 'â–¶ï¸ æ’­æ”¾';
                btn.className = 'px-4 py-2 bg-green-500 text-white rounded';
            } else {
                playInterval = setInterval(() => {
                    if (currentIndex < segments.length - 1) {
                        currentIndex++;
                        renderTranscript();
                        updateTimeline();
                    } else {
                        playPause();
                    }
                }, 2000);
                btn.textContent = 'â¸ï¸ æš‚åœ';
                btn.className = 'px-4 py-2 bg-red-500 text-white rounded';
            }
            isPlaying = !isPlaying;
        }

        function reset() {
            if (isPlaying) playPause();
            currentIndex = -1;
            renderTranscript();
            updateTimeline();
        }

        function updateTimeline() {
            const timeline = document.getElementById('timeline');
            const currentTime = document.getElementById('currentTime');
            
            if (segments.length > 0) {
                const maxTime = segments[segments.length - 1].timeSeconds;
                timeline.max = maxTime;
                document.getElementById('maxTime').textContent = formatTime(maxTime);
                
                if (currentIndex >= 0) {
                    timeline.value = segments[currentIndex].timeSeconds;
                    currentTime.textContent = formatTime(segments[currentIndex].timeSeconds);
                } else {
                    timeline.value = 0;
                    currentTime.textContent = '0:00';
                }
            }
        }

        function seek(value) {
            const targetTime = parseInt(value);
            currentIndex = segments.findIndex(seg => seg.timeSeconds > targetTime) - 1;
            if (currentIndex < 0) currentIndex = segments.length - 1;
            renderTranscript();
            document.getElementById('currentTime').textContent = formatTime(targetTime);
        }

        function showPasteModal() {
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('modal').classList.remove('flex');
        }

        function loadPastedText() {
            const text = document.getElementById('pasteText').value;
            if (text.trim()) {
                loadTranscript(text);
            }
            closeModal();
        }

        function loadTranscript(text) {
            segments = parseTranscript(text);
            allTerms = extractTerms(segments);
            reset();
            renderTerms();
            console.log('Loaded transcript:', segments.length, 'segments');
        }

        // Initialize
        function init() {
            console.log('Initializing...');
            loadTranscript(sampleText);
        }

        // Start when page loads
        window.onload = init;
    </script>
</body>
</html>


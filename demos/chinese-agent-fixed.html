<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£ä¹¦ä¼šè®®åŠ©æ‰‹ - Meeting Agent (Fixed)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
        }
        .transcript-item { 
            transition: opacity 0.3s ease; 
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        .revealed { opacity: 1; background: white; }
        .hidden { opacity: 0.4; background: #f9f9f9; }
        .highlight { 
            background: #fef3c7; 
            padding: 2px 4px; 
            border-radius: 4px; 
            cursor: pointer;
            font-weight: 500;
        }
        .highlight:hover { background: #fde047; }
        .chinese-text {
            line-height: 1.6;
            word-break: break-word;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4">ğŸ¯ é£ä¹¦ä¼šè®®åŠ©æ‰‹ - Feishu Meeting Agent (Fixed)</h1>
        
        <!-- Controls -->
        <div class="bg-white rounded-lg shadow p-4 mb-4">
            <div class="flex gap-2 mb-4">
                <button id="playBtn" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">â–¶ï¸ æ’­æ”¾</button>
                <button id="resetBtn" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">ğŸ”„ é‡ç½®</button>
                <button id="pasteBtn" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">ğŸ“‹ ç²˜è´´è½¬å½•</button>
                <label for="fileInput" class="px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 cursor-pointer">ğŸ“ ä¸Šä¼ æ–‡ä»¶</label>
                <input type="file" id="fileInput" accept=".txt" style="display: none;">
                <button id="loadSample1" class="px-3 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">ğŸ“„ ç¤ºä¾‹1</button>
                <button id="loadSample2" class="px-3 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">ğŸ“„ ç¤ºä¾‹2</button>
            </div>
            
            <!-- File info -->
            <div id="fileInfo" class="mb-2 text-sm text-gray-600 hidden">
                å·²åŠ è½½æ–‡ä»¶: <span id="fileName"></span>
            </div>
            
            <!-- Timeline -->
            <div class="flex items-center gap-2 mb-2">
                <span id="currentTime" class="text-sm font-mono w-12">0:00</span>
                <input type="range" id="timeline" min="0" max="300" value="0" class="flex-1">
                <span id="maxTime" class="text-sm font-mono w-12">5:00</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <!-- Left: Transcript -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold mb-3">ğŸ“œ ä¼šè®®è½¬å½•</h2>
                    <div id="transcript" class="space-y-2 max-h-96 overflow-y-auto">
                        <!-- Transcript items will be inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Right: Terms -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold mb-3">ğŸ“– å…³é”®æœ¯è¯­</h2>
                    <div id="activeTerm" class="text-blue-600 font-semibold mb-2">ç‚¹å‡»é«˜äº®æœ¯è¯­æŸ¥çœ‹å®šä¹‰</div>
                    <div id="termDefinition" class="text-gray-600 text-sm mb-4 chinese-text">æœ¯è¯­ä¼šéšç€ä¼šè®®è¿›åº¦é€æ¸æ˜¾ç¤ºã€‚</div>
                    <div id="termsList" class="flex flex-wrap gap-1">
                        <!-- Terms will be inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="bg-white rounded-lg shadow p-4 mt-4">
            <h2 class="text-lg font-semibold mb-3">ğŸ“Š æ€§èƒ½æŒ‡æ ‡</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div>
                    <span class="text-gray-600">è§£ææ—¶é—´:</span>
                    <span id="parseTime" class="font-mono">-</span>
                </div>
                <div>
                    <span class="text-gray-600">ç‰‡æ®µæ•°é‡:</span>
                    <span id="segmentCount" class="font-mono">-</span>
                </div>
                <div>
                    <span class="text-gray-600">æœ¯è¯­æ•°é‡:</span>
                    <span id="termCount" class="font-mono">-</span>
                </div>
                <div>
                    <span class="text-gray-600">æ–‡ä»¶å¤§å°:</span>
                    <span id="fileSize" class="font-mono">-</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Paste Modal -->
    <div id="pasteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl m-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">ğŸ“‹ ç²˜è´´è½¬å½•æ–‡æœ¬</h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700">âœ•</button>
            </div>
            <textarea id="pasteArea" class="w-full h-64 border rounded p-3 font-mono text-sm chinese-text" 
                placeholder="åœ¨æ­¤ç²˜è´´é£ä¹¦è½¬å½•æ–‡æœ¬...

æ ¼å¼ç¤ºä¾‹:
æ±¤æ¬£é’° 00:00
ä¼šè®®å†…å®¹...

è¯´è¯äºº 1 01:30
æ›´å¤šå†…å®¹..."></textarea>
            <div class="flex justify-end gap-2 mt-4">
                <button id="cancelPaste" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">å–æ¶ˆ</button>
                <button id="loadTranscript" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">åŠ è½½</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data embedded directly
        const SAMPLE_TRANSCRIPT_1 = \`æ±¤æ¬£é’° 00:00
çŒ«æˆ´åœ¨èº«ä¸Šï¼Œç„¶ååˆæœ‰å®šä½ï¼Œåˆæœ‰ç³–åŒ…ä¸ç¿»è¯‘ã€‚å—¯ï¼Œå»å¹´å¥½åƒå°±æœ‰è¿™ä¸ªï¼Œå¥½åƒå°±æœ‰ä¸€ä¸ªï¼Œå»å¹´å¥½åƒæœ‰ä¸€ä¸ªç±»ä¼¼çš„ï¼Œå°±æ˜¯ä¹Ÿæˆ´åœ¨ä»€ä¹ˆèº«ä¸Šå•Šï¼Ÿç‹—å•Šï¼Ÿå¯¹å•Šï¼Œé‚£ä¸ªç½‘ç«™çš„å“ªé‡Œå•Šï¼Ÿé‚£ä¸ªæœ‰æ²¡æœ‰æ€»çš„é‚£ä¸ª listï¼Ÿå¦‚æœå•ç‹¬å‘ä¸€ä¸ªï¼ŒOKï¼Œæˆ‘æ¥å‘ä¸€ä¸ªè¿™ç§çš„ listï¼Œå…ˆï¼Œè¿™ä¸ªå…ˆåˆ°ï¼Œæˆ‘å‘ä¹Ÿè¡Œï¼Œå¼ è€å¸ˆä¸ç”¨å‘ã€‚

æ±¤æ¬£é’° 00:56
ç„¶åï¼Œå—¯ï¼Œè¦ä¸ç„¶æˆ‘ä»¬å…ˆè¯´ï¼Œå—¯ï¼Œå°±æ˜å¤©ï¼Œä¸æ˜¯è¿˜æ˜¯ä¸‹åˆæœ‰é‚£ä¸ªå‘¨ä¼šå˜›ï¼Ÿå—¯ï¼Œå¯¹ï¼Œå°±å¤§å®¶æœ€è¿‘æœ‰æ²¡æœ‰ä»€ä¹ˆå›°éš¾ï¼Ÿç„¶åä»¥åŠæœ‰æ²¡æœ‰è¯†åˆ«åˆ°ä»€ä¹ˆæœºä¼šã€æƒ³æ³•çš„ï¼Ÿç„¶åå…¶ä»–çš„å°±æ˜¯ä¾‹è¡Œçš„ï¼Œæ¯”å¦‚åœ¨ä¼šä¸Šå°±ä¾‹è¡ŒåŒæ­¥äº†ã€‚ä¸»è¦æ˜¯æˆ‘è§‰å¾—å¤§ä¼šå‰æ²¡æœ‰ä»€ä¹ˆè¦å†³ç­–çš„ã€‚å¯¹ï¼Œä¸€ä¸ªæ˜¯é‚£ä¸ªæˆ‘çŸ¥é“çš„ï¼Œä¸€ä¸ªæ˜¯å¿—æ—­é‚£è¾¹ï¼Œå¯¹å§ï¼Ÿä»–æ‰‹æœºæµ‹è¿™ä¸ªå¼€å‘çš„èµ„æºï¼Œæˆ–è€…è¯´è¿™ç§èƒ½åŠ›æˆ‘ä»¬è¿˜æ¯”è¾ƒçŸ­ç¼ºä¸€äº›ï¼Œæ˜¯å§ï¼Ÿè¡Œï¼Œè¿™ä¸ªæ˜¯å·²ç»çŸ¥é“äº†ã€‚

æ±¤æ¬£é’° 01:36
å¯¹ï¼Œæˆ‘çœ‹è¿™ä¸ªé»‘é©¬é¡¹ç›®ä»–ä»¬éƒ½æœ‰åœ¨å…¨æ· OA ä¸Šéƒ¨ç½²ä¸€äº› 1.5B çš„ç«¯è§‚æµ‹æ¨¡å‹ã€‚å—¯ï¼Œå®Œå…¨æ˜¯æ¯”æˆ‘ä»¬è¿™ä¸ªå‚æ•°é‡è¦å¤§å¾—å¤šï¼Œç„¶åå¥½åƒè¿˜è¡Œï¼Œé‚£å¯ä»¥è”ç³»ä¸‹ä»–ä»¬ï¼Œæ˜¯å§ï¼Ÿåæ­£å°±æ˜¯é‚£ä¸ªé»‘é©¬ï¼Œè¿™ä¸ªé©¬æ‹‰æ¾ä¸Šï¼Œå¯¹ï¼Œæˆ‘è§‰å¾—å¯èƒ½é‚£äº›äººä¹Ÿå¾ˆé‡è¦ï¼Œçœ‹å“ªäº›äººæœ‰æ„æ€ï¼Œç„¶åè·Ÿä»–ä»¬èŠä¸€èŠã€‚\`;

        const SAMPLE_TRANSCRIPT_2 = \`è¯´è¯äºº 1 00:01
å¤§éƒ¨é—¨çš„è¯ä¸€èˆ¬ä¹Ÿå¯¹é½åˆ° 7 æœˆé‚£ç§ï¼Œæœˆåˆå…¶ä»–çš„ç»„ç»‡æ¶æ„å¯èƒ½å·²ç»æ˜¾ç¤ºã€‚æ˜¨å¤©æˆ‘ä¹Ÿè·Ÿå¤§å®¶å‡ ä¸ªç›¸å…³çš„èŠäº†èŠï¼Œå°±æ˜¯æˆ‘ä¸çŸ¥é“å¤§å®¶æ€ä¹ˆæ„Ÿå—ã€‚æˆ‘æ„Ÿè§‰ç°åœ¨è¿™å‡ ä¸ªæ–¹å‘è¿˜æ˜¯æœ‰ä¸€äº›å›°éš¾ã€‚å¾…ä¼šå„¿ä¹Ÿä¼šè®¨è®ºä¸€ä¸‹è¿™äº›å›°éš¾ï¼Œä»¥åŠæˆ‘ä»¬åº”å¯¹çš„ä¸€äº›ç­–ç•¥ã€‚å¥½ï¼Œæ‰€ä»¥æœ‰äº›å›°éš¾é¦–å…ˆè¿˜æ˜¯æ­£å¸¸çš„ï¼Œæˆ–è€…è¯´æœªæ¥å¯èƒ½è¿˜ä¼šæ›´å¤šä¸€äº›ã€‚

è¯´è¯äºº 1 01:42
ç„¶åæˆ‘ä»¬ç°åœ¨ï¼Œæ¯”å¦‚ä¸€ä¸ªæ˜¯æ–°çŸ¥çš„è·Ÿè¸ªæˆ–è€…è·å–çš„ä»»åŠ¡ï¼Œè¿˜æœ‰æ—¥å¸¸çš„ä¼šè®®çºªè¦ä¹Ÿå¥½ï¼Œone-one çš„è¿™ç§ä¼šï¼Œæ˜¯å§ï¼ŸèŒåœºäººæ¯å¤©éƒ½è¦å¼€å„ç§ä¼šã€‚è¿™æ ·çš„è¯ï¼Œå…¶å®å¤§å®¶åº”è¯¥è®°å¾—ä¹‹å‰ä¸¤ä¸ªåŒºåŸŸéƒ½è¡¨è¾¾è¿‡è¿™å¾ˆç—›ï¼Œç„¶åæˆ‘è‡ªå·±å…¶å®ä¹Ÿå¾ˆç—›ã€‚æ¯å¤©ä¿¡æ¯é‡çœ‹ä¸è¿‡æ¥ï¼Œå¯¹å§ï¼Ÿç”Ÿæ€•æ¼æ‰ä»€ä¹ˆã€‚

è¯´è¯äºº 2 19:14
æˆ‘è§‰å¾—ç©å…·å…¶å®æ˜¯éŸ³ç®±çš„ä¸‹ä¸€ä¸ªå½¢æ€ã€‚å¯èƒ½ç°åœ¨ç©å…·å·®çš„æ˜¯å„ç§ä¼ æ„Ÿå™¨ä¹‹é—´çš„è”åŠ¨ã€‚å¦‚æœèƒ½åšåˆ°æ§åˆ¶æ‰‹æœºã€æ§åˆ¶å®¶é‡Œè®¾å¤‡ï¼ŒéŸ³ç®±å°±ä¸éœ€è¦äº†ã€‚\`;

        // Global variables
        let segments = [];
        let terms = new Set();
        let isPlaying = false;
        let currentIndex = 0;
        let interval;
        let selectedTerm = null;

        // Performance tracking
        let performanceMetrics = {
            parseTime: 0,
            segmentCount: 0,
            termCount: 0,
            fileSize: 0
        };

        // Utility functions
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return \`\${mins}:\${secs.toString().padStart(2, '0')}\`;
        }

        function parseTime(timeStr) {
            if (!timeStr) return 0;
            const parts = timeStr.split(':').map(Number);
            if (parts.length === 2) return parts[0] * 60 + parts[1];
            if (parts.length === 3) return parts[0] * 3600 + parts[1] * 60 + parts[2];
            return 0;
        }

        // Parse transcript with performance tracking
        function parseTranscript(text) {
            const startTime = performance.now();
            
            const lines = text.split('\\n').filter(line => line.trim());
            const parsed = [];
            let currentSpeaker = '';
            let currentTime = 0;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                // Check if line contains speaker and time (e.g., "æ±¤æ¬£é’° 00:00" or "è¯´è¯äºº 1 01:42")
                const speakerMatch = line.match(/^(.+?)\\s+(\\d{1,2}:\\d{2})$/);
                if (speakerMatch) {
                    currentSpeaker = speakerMatch[1];
                    currentTime = parseTime(speakerMatch[2]);
                    continue;
                }
                
                // Content line
                if (line && currentSpeaker) {
                    parsed.push({
                        speaker: currentSpeaker,
                        timeSeconds: currentTime,
                        text: line,
                        timestamp: formatTime(currentTime)
                    });
                    currentTime += 20; // Assume 20 seconds between segments
                }
            }
            
            const endTime = performance.now();
            performanceMetrics.parseTime = (endTime - startTime).toFixed(2);
            performanceMetrics.segmentCount = parsed.length;
            
            return parsed;
        }

        // Extract terms with performance tracking
        function extractTerms(segments) {
            const termSet = new Set();
            const text = segments.map(s => s.text).join(' ');
            
            // Extract Chinese terms (2-4 characters)
            const chineseTerms = text.match(/[\\u4e00-\\u9fa5]{2,4}/g) || [];
            chineseTerms.forEach(term => {
                if (!/^(è¿™ä¸ª|é‚£ä¸ª|å°±æ˜¯|ç„¶å|ä½†æ˜¯|å¦‚æœ|æ‰€ä»¥|å› ä¸º|å¯èƒ½|åº”è¯¥|éœ€è¦)$/.test(term)) {
                    termSet.add(term);
                }
            });
            
            // Extract English terms
            const englishTerms = text.match(/[A-Z][A-Za-z]{2,}/g) || [];
            englishTerms.forEach(term => termSet.add(term));
            
            // Extract acronyms
            const acronyms = text.match(/\\b[A-Z]{2,5}\\b/g) || [];
            acronyms.forEach(term => termSet.add(term));
            
            performanceMetrics.termCount = termSet.size;
            return Array.from(termSet).slice(0, 20); // Limit to top 20 terms
        }

        // Render functions
        function renderTranscript() {
            const container = document.getElementById('transcript');
            container.innerHTML = segments.map((segment, index) => {
                const isRevealed = index <= currentIndex;
                const className = isRevealed ? 'revealed' : 'hidden';
                const highlightedText = highlightTerms(segment.text, terms);
                
                return \`
                    <div class="transcript-item \${className} p-3 rounded border">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs text-gray-500 font-mono">\${segment.timestamp}</span>
                            <span class="text-xs bg-gray-100 px-2 py-1 rounded">\${segment.speaker}</span>
                        </div>
                        <div class="chinese-text">\${highlightedText}</div>
                    </div>
                \`;
            }).join('');
        }

        function highlightTerms(text, terms) {
            let highlighted = text;
            terms.forEach(term => {
                const regex = new RegExp(\`\\\\b\${term}\\\\b\`, 'gi');
                highlighted = highlighted.replace(regex, \`<span class="highlight" onclick="selectTerm('\${term}')">\${term}</span>\`);
            });
            return highlighted;
        }

        function renderTerms() {
            const container = document.getElementById('termsList');
            container.innerHTML = Array.from(terms).map(term => 
                \`<span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm cursor-pointer hover:bg-blue-200" onclick="selectTerm('\${term}')">\${term}</span>\`
            ).join('');
        }

        function selectTerm(term) {
            selectedTerm = term;
            document.getElementById('activeTerm').textContent = term;
            document.getElementById('termDefinition').textContent = \`"\${term}" åœ¨ä¼šè®®ä¸­å‡ºç°äº†å¤šæ¬¡ï¼Œç‚¹å‡»é«˜äº®æŸ¥çœ‹ä¸Šä¸‹æ–‡ã€‚\`;
        }

        function updatePerformanceDisplay() {
            document.getElementById('parseTime').textContent = \`\${performanceMetrics.parseTime}ms\`;
            document.getElementById('segmentCount').textContent = performanceMetrics.segmentCount;
            document.getElementById('termCount').textContent = performanceMetrics.termCount;
            document.getElementById('fileSize').textContent = \`\${performanceMetrics.fileSize}KB\`;
        }

        // File loading
        function loadTranscriptData(text, filename = 'ç¤ºä¾‹æ–‡ä»¶') {
            console.log('å¼€å§‹è§£æè½¬å½•æ–‡æœ¬...');
            performanceMetrics.fileSize = (text.length / 1024).toFixed(1);
            
            segments = parseTranscript(text);
            terms = new Set(extractTerms(segments));
            
            reset();
            renderTerms();
            updatePerformanceDisplay();
            
            // Show file info
            document.getElementById('fileName').textContent = filename;
            document.getElementById('fileInfo').classList.remove('hidden');
            
            console.log(\`åŠ è½½å®Œæˆ: \${segments.length} ä¸ªç‰‡æ®µ, \${terms.size} ä¸ªæœ¯è¯­\`);
            
            // Update timeline max
            if (segments.length > 0) {
                const maxTime = Math.max(...segments.map(s => s.timeSeconds));
                document.getElementById('timeline').max = maxTime;
                document.getElementById('maxTime').textContent = formatTime(maxTime);
            }
        }

        // Play/pause
        function togglePlay() {
            const btn = document.getElementById('playBtn');
            if (isPlaying) {
                clearInterval(interval);
                btn.textContent = 'â–¶ï¸ æ’­æ”¾';
            } else {
                interval = setInterval(() => {
                    if (currentIndex < segments.length - 1) {
                        currentIndex++;
                        renderTranscript();
                        
                        const currentTime = segments[currentIndex].timeSeconds;
                        document.getElementById('timeline').value = currentTime;
                        document.getElementById('currentTime').textContent = formatTime(currentTime);
                    } else {
                        togglePlay(); // Stop at end
                    }
                }, 2000); // 2 seconds per segment
                btn.textContent = 'â¸ï¸ æš‚åœ';
            }
            isPlaying = !isPlaying;
        }

        function reset() {
            clearInterval(interval);
            isPlaying = false;
            currentIndex = 0;
            document.getElementById('playBtn').textContent = 'â–¶ï¸ æ’­æ”¾';
            document.getElementById('timeline').value = 0;
            document.getElementById('currentTime').textContent = '0:00';
            renderTranscript();
        }

        // Initialize
        function init() {
            console.log('åˆå§‹åŒ–ä¼šè®®åŠ©æ‰‹...');
            
            // Load sample data
            loadTranscriptData(SAMPLE_TRANSCRIPT_1, 'ç¤ºä¾‹è½¬å½•');
            
            // Event listeners
            document.getElementById('playBtn').onclick = togglePlay;
            document.getElementById('resetBtn').onclick = reset;
            
            // File input
            document.getElementById('fileInput').onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        loadTranscriptData(e.target.result, file.name);
                    };
                    reader.readAsText(file, 'UTF-8');
                }
            };
            
            // Sample buttons
            document.getElementById('loadSample1').onclick = () => {
                loadTranscriptData(SAMPLE_TRANSCRIPT_1, 'ç¤ºä¾‹1 - æ±¤æ¬£é’°ä¼šè®®');
            };
            
            document.getElementById('loadSample2').onclick = () => {
                loadTranscriptData(SAMPLE_TRANSCRIPT_2, 'ç¤ºä¾‹2 - è¯´è¯äººä¼šè®®');
            };
            
            // Paste modal
            document.getElementById('pasteBtn').onclick = () => {
                document.getElementById('pasteModal').classList.remove('hidden');
                document.getElementById('pasteModal').classList.add('flex');
            };
            
            document.getElementById('closeModal').onclick = 
            document.getElementById('cancelPaste').onclick = () => {
                document.getElementById('pasteModal').classList.add('hidden');
                document.getElementById('pasteModal').classList.remove('flex');
            };
            
            document.getElementById('loadTranscript').onclick = () => {
                const newText = document.getElementById('pasteArea').value;
                if (newText.trim()) {
                    loadTranscriptData(newText, 'ç²˜è´´çš„æ–‡æœ¬');
                }
                document.getElementById('pasteModal').classList.add('hidden');
                document.getElementById('pasteModal').classList.remove('flex');
            };
            
            // Timeline control
            document.getElementById('timeline').oninput = (e) => {
                const targetTime = parseInt(e.target.value);
                currentIndex = segments.findIndex(seg => seg.timeSeconds > targetTime) - 1;
                if (currentIndex < 0) currentIndex = segments.length - 1;
                renderTranscript();
                document.getElementById('currentTime').textContent = formatTime(targetTime);
            };
        }

        // Make selectTerm global for onclick
        window.selectTerm = selectTerm;

        // Start when page loads
        document.addEventListener('DOMContentLoaded', init);
        
        console.log('è„šæœ¬åŠ è½½æˆåŠŸ');
    </script>
</body>
</html>
